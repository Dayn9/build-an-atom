<!DOCTYPE html>
<!-- Build an Atom using Easel for the Scene Graph Library -->
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="">
  <meta name="viewport"
        content="width=960, height=480, initial-scale=1.0, maximum-scale=1.0"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="white">

  <title>Build an Atom</title>

  <link rel="stylesheet" href="common/phetcommon/css/phetcommon.css"/>
  <link rel="stylesheet" href="contrib/bootstrap-2.2.1/css/bootstrap.css"/>
  <link rel="stylesheet" href="contrib/bootstrap-2.2.1/css/bootstrap-responsive.css"/>

  <link rel="stylesheet" href="css/main-bootstrap.css">

  <!--JavaScript dependencies -->
  <script src="contrib/jquery-1.9.1.js"></script>
  <script src="contrib/bootstrap-2.2.1/js/bootstrap.js"></script>
  <script src='contrib/modernizr-2.6.2.min.js'></script>
  <script src='contrib/lodash-1.0.1.js'></script>

  <!-- Our code, in either the concatenated 'with comments' version or the minified version -->
  <script src="../scenery/dist/standalone/scenery.js"></script>
  <!-- <script src="../dist/standalone/scenery.min.js"></script> -->

</head>

<body>

<!-- The scene graph will be in this div -->
<div id="scene-graph">
</div>

<script>

  var sceneGraphDiv = $( '#scene-graph' );

  // initialize our scene
  var scene = new scenery.Scene( sceneGraphDiv );
  scene.initializeFullscreenEvents(); // sets up listeners on the document with preventDefault(), and forwards those events to our scene
  scene.resizeOnWindowResize(); // the scene gets resized to the full screen size

  var rootNode = new scenery.Node( {
                                     x: scene.sceneBounds.width() / 3,
                                     y: scene.sceneBounds.centerY(),
                                     scale: 0.4 / 0.707,
                                     layerSplit: true
                                   } );
  scene.addChild( rootNode );

  var group = new scenery.Node();
  rootNode.addChild( group );

  // keep the container centered
  function layout() {
    rootNode.x = scene.sceneBounds.width() / 3;
    rootNode.y = scene.sceneBounds.centerY();
  }
  $( window ).resize( layout );

  // our paths node for the shape
  var protonView = new scenery.Path( {
                                       shape: scenery.Shape.circle( 0, 0, 40 ),
                                       fill: 'red',
                                       stroke: '#000000',
                                       cursor: 'pointer'
                                     } );

  var neutronView = new scenery.Path( {
                                        shape: scenery.Shape.circle( 0, 0, 40 ),
                                        fill: 'gray',
                                        stroke: '#000000',
                                        cursor: 'pointer'
                                      } );
  var count = 20;
  for ( var i = 0; i < count; i++ ) {
    // anonymous function so the closure variables aren't shared between iterations
    (function () {
      var node = new scenery.Node( {
                                     x: ( Math.random() - 0.5 ) * 300,
                                     y: ( Math.random() - 0.5 ) * 300
                                   } );

      // point each node to the same path (DAG)
      node.addChild( Math.random() < 0.5 ? protonView : neutronView );
      group.addChild( node );

      // add a drag handler to each node
      node.addInputListener( new scenery.SimpleDragHandler( {
                                                              // allow moving a finger (touch) across a node to pick it up
                                                              allowTouchSnag: true
                                                            } ) );
    })();
  }

  /*---------------------------------------------------------------------------*
   * FPS meter
   *----------------------------------------------------------------------------*/

  //    var stats = new Stats();
  //    stats.setMode( 0 ); // 0: fps, 1: ms
  //    stats.domElement.style.position = 'absolute';
  //    stats.domElement.style.right = '0';
  //    stats.domElement.style.top = '0';
  //    document.body.appendChild( stats.domElement );


  /*---------------------------------------------------------------------------*
   * main loop
   *----------------------------------------------------------------------------*/

  var lastTime = 0;
  var timeElapsed = 0;
  function tick() {
    window.requestAnimationFrame( tick, sceneGraphDiv[0] );

//      stats.begin();
    scene.updateScene(); // repaints dirty regions. use renderScene() to render everything
//      stats.end();
  }
  window.requestAnimationFrame( tick, sceneGraphDiv[0] );

</script>

<div class="container phet-container">


  <!--Make the canvas be roughly the expected size on the nominal screen, which is 1024x768.-->
  <div id="canvas-container">
    <canvas id="atom-construction-canvas" width="614" height="768"></canvas>
  </div>

  <div id="control-panel" class="accordion">

    <div class="widget-box accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-target="#periodic-table-container" href="javascript: void(0)">
          <i class="icon-plus"></i><i class="icon-minus"></i> Periodic Table
        </a>
      </div>

      <div class="accordion-body in" id="periodic-table-container">
        <div id="periodic-table" class="accordion-inner"></div>
      </div>
    </div>

    <div class="widget-box accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle collapsed" data-toggle="collapse" data-target="#detailed-element-symbol-container" href="javascript: void(0)">
          <i class="icon-plus"></i><i class="icon-minus"></i> Symbol
        </a>
      </div>

      <div class="accordion-body collapse" id="detailed-element-symbol-container">
        <div id="detailed-element-symbol" class="accordion-inner"></div>
      </div>
    </div>

    <div class="widget-box accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle collapsed" data-toggle="collapse" data-target="#mass-number-accordion-container" href="javascript: void(0)">
          <i class="icon-plus"></i><i class="icon-minus"></i> Mass Number
        </a>
      </div>

      <div class="accordion-body collapse" id="mass-number-accordion-container">
        <div id="mass-number-container" class="accordion-inner">
          <div id="mass-number"></div>
        </div>
      </div>
    </div>

    <div class="widget-box accordion-group">
      <div class="accordion-heading">
        <a class="accordion-toggle collapsed" data-toggle="collapse" data-target="#net-charge-accordion-container" href="javascript: void(0)">
          <i class="icon-plus"></i><i class="icon-minus"></i> Charge Meter
        </a>
      </div>

      <div class="accordion-body collapse" id="net-charge-accordion-container">
        <div id="net-charge-container">
          <div id="net-charge" class="accordion-inner"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Main entry points for sim-specific code -->
<script data-main="js/config.js" src="contrib/require-2.1.4.js"></script>

</body>
</html>
